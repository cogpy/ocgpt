{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "OpenCog AtomSpace Schema",
  "description": "Schema defining the structure and types used in OpenCog AtomSpace",
  "definitions": {
    "atom": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["Node", "Link"]
        },
        "name": {
          "type": "string",
          "description": "Atom identifier or name"
        },
        "truth_value": {
          "$ref": "#/definitions/truth_value"
        },
        "attention_value": {
          "$ref": "#/definitions/attention_value"
        }
      },
      "required": ["type"]
    },
    "node": {
      "allOf": [
        {"$ref": "#/definitions/atom"},
        {
          "properties": {
            "type": {"const": "Node"},
            "node_type": {
              "type": "string",
              "enum": [
                "ConceptNode",
                "PredicateNode", 
                "VariableNode",
                "NumberNode",
                "SchemaNode",
                "GroundedSchemaNode",
                "WordNode",
                "LemmaNode"
              ]
            }
          },
          "required": ["node_type"]
        }
      ]
    },
    "link": {
      "allOf": [
        {"$ref": "#/definitions/atom"},
        {
          "properties": {
            "type": {"const": "Link"},
            "link_type": {
              "type": "string", 
              "enum": [
                "ListLink",
                "SetLink",
                "InheritanceLink",
                "SimilarityLink",
                "ImplicationLink",
                "EvaluationLink",
                "AndLink",
                "OrLink",
                "NotLink",
                "ExistsLink",
                "ForAllLink",
                "GetLink",
                "BindLink",
                "SatisfactionLink",
                "LambdaLink",
                "ExecutionOutputLink"
              ]
            },
            "outgoing": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/atom"
              },
              "description": "List of atoms this link points to"
            }
          },
          "required": ["link_type", "outgoing"]
        }
      ]
    },
    "truth_value": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["SimpleTruthValue", "CountTruthValue", "IndefiniteTruthValue", "FuzzyTruthValue"]
        },
        "strength": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Probability or confidence level"
        },
        "confidence": {
          "type": "number", 
          "minimum": 0,
          "maximum": 1,
          "description": "Confidence in the strength value"
        },
        "count": {
          "type": "number",
          "minimum": 0,
          "description": "Number of observations (for count-based TV)"
        }
      },
      "required": ["type", "strength", "confidence"]
    },
    "attention_value": {
      "type": "object",
      "properties": {
        "sti": {
          "type": "number",
          "description": "Short-term importance"
        },
        "lti": {
          "type": "number", 
          "description": "Long-term importance"
        },
        "vlti": {
          "type": "number",
          "description": "Very long-term importance"  
        }
      }
    },
    "atomspace": {
      "type": "object",
      "properties": {
        "atoms": {
          "type": "array",
          "items": {
            "oneOf": [
              {"$ref": "#/definitions/node"},
              {"$ref": "#/definitions/link"}
            ]
          }
        },
        "size": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of atoms in the atomspace"
        },
        "uuid": {
          "type": "string",
          "description": "Unique identifier for this atomspace instance"
        }
      },
      "required": ["atoms"]
    }
  },
  "type": "object",
  "$ref": "#/definitions/atomspace"
}